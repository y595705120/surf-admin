var F=Object.defineProperty;var G=(t,l,d)=>l in t?F(t,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[l]=d;var m=(t,l,d)=>(G(t,typeof l!="symbol"?l+"":l,d),d);import{h as X,w,r as v,E as Z,n as O,al as J,q as r,o as y,k as R,m as c,p as a,P as s,Z as W,Y as $,z as h,a4 as ee,a5 as B,W as S,as as oe,J as te,O as ae,a6 as ne,a7 as se}from"./vue-5a2488fc.js";import{u as le,i as ie,e as ce,m as re,r as de,l as ue,_ as pe}from"./index-dcab27dc.js";import{t as me,a as V}from"./index-d02643f5.js";import{b}from"./validate-d0780182.js";const he="/assets/login-header-2b702f97.png",fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADABAMAAACg8nE0AAAAD1BMVEXBy9eGlqeTorG9yNSptcPYN5ilAAABVElEQVR42u3Y3Y2DMBAEYBNfAR6gANIBdHDpv6m7h9OtorAWMp6IjeYrgGHX/NibRERERERERETEs+HXlFjwLzHcALOk7gY8KZT7Z9YAQ1mHB17MhAXgLQN2EQpglQBwS/iC45vQIUqP4CK9xGYhdIjQI1SECLihYuEsgSkRAlClgDcEZFStnIfIFAUoQAERAjKq1ut/7BRwgZ9+PSDCxiv+3rS6fY9xAElwRTkE+sfYKAdxd5QQZxjijHMiDaT2mhRtKLg71ow1mPVHy4GG4yIi0kP++/VPa+ov3/Fk7BuyYceUernDMfa7PC9iAKjjFhzAOiKb5XR7SG164LC5w9NTN5Lu38yk/pvScH1iQoaj1wASTQgNam0SGjUUwCkBzQ4XwC0BJ1wiYAC4PdpwwkTqkLlAQMYpK2eNTVGAAhSgAAUoQAEKUIACFKAABShAAZ8c8AO1HXS7nTcqUQAAAABJRU5ErkJggg==",e={width:0,height:0,bubbleEl:null,canvas:null,ctx:{},circles:[],animate:!0,requestId:null},ge=function(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl=document.getElementById("bubble"),e.bubbleEl.style.height=e.height+"px",e.canvas=document.getElementById("bubble-canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.ctx=e.canvas.getContext("2d"),e.circles=[];for(let t=0;t<e.width*.5;t++){const l=new _e;e.circles.push(l)}P(),we()};function L(){e.animate=!(document.body.scrollTop>e.height)}function M(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl.style.height=e.height+"px",e.canvas.width=e.width,e.canvas.height=e.height}function P(){if(e.animate){e.ctx.clearRect(0,0,e.width,e.height);for(const t in e.circles)e.circles[t].draw()}e.requestId=requestAnimationFrame(P)}class _e{constructor(){m(this,"pos");m(this,"alpha");m(this,"scale");m(this,"velocity");m(this,"draw");this.pos={x:Math.random()*e.width,y:e.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random(),this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,e.ctx.beginPath(),e.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),e.ctx.fillStyle="rgba(255,255,255,"+this.alpha+")",e.ctx.fill()}}}function we(){window.addEventListener("scroll",L),window.addEventListener("resize",M)}function be(){window.removeEventListener("scroll",L),window.removeEventListener("resize",M),cancelAnimationFrame(e.requestId)}const x=t=>(ne("data-v-4d976d18"),t=t(),se(),t),Ae={class:"switch-language"},ve=x(()=>c("canvas",{id:"bubble-canvas",class:"bubble-canvas"},null,-1)),ye=[ve],xe={class:"login"},Ee={class:"login-box"},ke=x(()=>c("div",{class:"head"},[c("img",{src:he,alt:""})],-1)),Ie={class:"form"},Ce=x(()=>c("img",{class:"profile-avatar",src:fe,alt:""},null,-1)),Re={class:"content"},Be=X({__name:"login",setup(t){let l;const d=le(),Q=ie();me(d.layout.isDark);const E=w(),k=w(),I=w(),U=w(),f=v({showCaptcha:!1,submitLoading:!1}),i=v({username:"",password:"",keep:!1,captchaId:re(),captchaInfo:""}),{t:p}=ce(),z=v({username:[b({name:"required",message:p("login.Please enter an account")}),b({name:"account"})],password:[b({name:"required",message:p("login.Please input a password")}),b({name:"password"})]}),N=()=>{i.username===""?k.value.focus():i.password===""&&I.value.focus()};Z(()=>{l=window.setTimeout(()=>{ge()},1e3),V("get").then(u=>{f.showCaptcha=u.data.captcha,O(()=>N())}).catch(u=>{console.log(u)})}),J(()=>{clearTimeout(l),be()});const C=()=>{var u;(u=E.value)==null||u.validate(o=>{o&&T()})},T=(u="")=>{f.submitLoading=!0,V("post",i).then(o=>{Q.dataFill(o.data.userInfo),te({message:o.msg,type:"success"}),de.push({path:o.data.routePath})}).finally(()=>{f.submitLoading=!1})};return(u,o)=>{const g=r("Icon"),Y=r("el-dropdown-item"),D=r("el-dropdown-menu"),K=r("el-dropdown"),A=r("el-input"),_=r("el-form-item"),q=r("el-checkbox"),H=r("el-button"),j=r("el-form");return y(),R("div",null,[c("div",Ae,[a(K,{size:"large","hide-timeout":50,placement:"bottom-end","hide-on-click":!0},{dropdown:s(()=>[a(D,{class:"chang-lang"},{default:s(()=>[(y(!0),R(W,null,$(h(d).lang.langArray,n=>(y(),ae(Y,{key:n.name,onClick:Se=>h(ue)(n.name)},{default:s(()=>[B(S(n.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:s(()=>[a(g,{name:"fa fa-globe",color:"var(--el-text-color-secondary)",size:"28"})]),_:1})]),c("div",{onContextmenu:o[0]||(o[0]=ee(()=>{},["stop"])),id:"bubble",class:"bubble"},ye,32),c("div",xe,[c("div",Ee,[ke,c("div",Ie,[Ce,c("div",Re,[a(j,{onKeyup:o[6]||(o[6]=oe(n=>C(),["enter"])),ref_key:"formRef",ref:E,rules:z,size:"large",model:i},{default:s(()=>[a(_,{prop:"username"},{default:s(()=>[a(A,{ref_key:"usernameRef",ref:k,type:"text",clearable:"",modelValue:i.username,"onUpdate:modelValue":o[1]||(o[1]=n=>i.username=n),placeholder:h(p)("login.Please enter an account")},{prefix:s(()=>[a(g,{name:"fa fa-user",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(_,{prop:"password"},{default:s(()=>[a(A,{ref_key:"passwordRef",ref:I,modelValue:i.password,"onUpdate:modelValue":o[2]||(o[2]=n=>i.password=n),type:"password",placeholder:h(p)("login.Please input a password"),"show-password":""},{prefix:s(()=>[a(g,{name:"fa fa-unlock-alt",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(_,{prop:"captchaInfo"},{default:s(()=>[a(A,{ref_key:"captchaRef",ref:U,modelValue:i.captchaInfo,"onUpdate:modelValue":o[3]||(o[3]=n=>i.captchaInfo=n),type:"text",placeholder:"请输入谷歌验证码"},{prefix:s(()=>[a(g,{name:"fa fa-google",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue"])]),_:1}),a(q,{modelValue:i.keep,"onUpdate:modelValue":o[4]||(o[4]=n=>i.keep=n),label:h(p)("login.Hold session"),size:"default"},null,8,["modelValue","label"]),a(_,null,{default:s(()=>[a(H,{loading:f.submitLoading,class:"submit-button",round:"",type:"primary",size:"large",onClick:o[5]||(o[5]=n=>C())},{default:s(()=>[B(S(h(p)("login.Sign in")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}});const Ue=pe(Be,[["__scopeId","data-v-4d976d18"]]);export{Ue as default};
