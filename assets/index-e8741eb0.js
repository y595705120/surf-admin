import P from"./addUser-0e4d3801.js";import{d as R,b as U,T as H,a as j}from"./index-be535443.js";import q from"./popupForm-b14edb16.js";import{e as z,M as $,K as s,s as O}from"./index-a237e875.js";import{_ as Z}from"./userInfo.vue_vue_type_script_setup_true_lang-24fcda37.js";import F from"./userBalance-1b189ba0.js";import G from"./userInvite-5c4e4b18.js";import{a as K,b as L,g as C,c as Q,d as W,e as J}from"./sass.default-9c4822b8.js";import{f as X}from"./file-download-cdff80a5.js";import Y from"./sendBao-f83b4186.js";import{h as ee,w as te,E as ae,af as re,q as u,a8 as oe,o as p,k as ne,z as i,O as d,V as h,p as o,P as l,$ as I,a5 as g,W as w,m as D,aa as f}from"./vue-5a2488fc.js";import"./index-bb90bcb7.js";import"./index-9b0b81ef.js";import"./baoList.vue_vue_type_script_setup_true_lang-3f2ff200.js";const le={class:"default-main ba-table-box"},se=D("span",{class:"table-header-operate-text"},"导出",-1),ie=D("span",{class:"table-header-operate-text"},"批量添加",-1),Be=ee({name:"user/user",__name:"index",setup(ce){const V=()=>{r.form.items.values="",r.form.operate="AddUser"},{t}=z(),k=te();let b=[{render:"tipButton",name:"info",title:"团队备注备注",text:"",type:"danger",icon:"fa fa-plus-square",class:"table-row-info",disabledTip:!1,click:e=>{A(e.id)},display:e=>{if(s("addTeamRemark"))return!0}},{render:"tipButton",name:"info",title:"添加备注",text:"",type:"primary",icon:"fa fa-plus-square",class:"table-row-info",disabledTip:!1,click:e=>{E(e.id)},display:e=>{if(s("addRemark"))return!0}},{render:"tipButton",name:"info",title:"更改渠道",text:"",type:"info",icon:"fa fa-gear",class:"table-row-info",disabledTip:!1,click:e=>{f.prompt("请输入渠道ID","更改渠道",{confirmButtonText:"确定",cancelButtonText:t("Cancel"),inputValidator:function(a){return!!a},inputErrorMessage:"请输入渠道ID"}).then(({value:a})=>{K({id:e.id,agent_id:a}).then(n=>{n.code==1&&r.onTableHeaderAction("refresh",{})})})},display:e=>{if(s("setAgent"))return!0}},{render:"tipButton",name:"info",title:"更改上级",text:"",type:"warning",icon:"fa fa-users",class:"table-row-info",disabledTip:!1,click:e=>{f.prompt("请输入上级ID","更改上级",{confirmButtonText:"确定",cancelButtonText:t("Cancel"),inputValidator:function(a){return!!a},inputErrorMessage:"请输入渠道ID"}).then(({value:a})=>{L({id:e.id,p_id:a}).then(n=>{n.code==1&&r.onTableHeaderAction("refresh",{})})})},display:e=>{if(s("setPuser"))return!0}},{render:"tipButton",name:"info",title:"设置打码",text:"",type:"primary",icon:"fa fa-cny",class:"table-row-info",disabledTip:!1,click:e=>{C({id:e.id}).then(a=>{a.code==1&&(r.form.operate="SetBetTask",r.form.items=a.data.row)})},display:e=>{if(s("setBalance"))return!0}},{render:"tipButton",name:"info",title:"设置金币信息",text:"",type:"info",icon:"fa fa-cny",class:"table-row-info",disabledTip:!1,click:e=>{C({id:e.id}).then(a=>{a.code==1&&(r.form.operate="SetBalance",r.form.items=a.data.row)})},display:e=>{if(s("setBalance"))return!0}},{render:"tipButton",name:"info",title:"分流开关",text:"",type:"danger",icon:"fa fa-share-alt",class:"table-row-info",disabledTip:!1,click:e=>{r.form.operate="SetInviteSwitch",r.form.items=e},display:e=>{if(s("setInviteSwitch"))return!0}},{render:"tipButton",name:"info",title:"宝箱发放",text:"",type:"success",icon:"fa fa-gift",class:"table-row-info",disabledTip:!1,click:e=>{r.form.operate="SendBao",r.form.items=e},display:e=>{if(s("sendBao"))return!0}},{render:"tipButton",name:"warning",title:"设置中奖率",text:"",type:"warning",icon:"fa fa-gear",class:"table-row-info",disabledTip:!1,click:e=>{S(e)},display:e=>{if(s("setZjl"))return!0}}];b=b.concat(R(["edit","delete"]));const y=e=>{r.form.extend.user_id=e,r.form.operate="userInfoDialog"},S=e=>{f.prompt("设置中奖率","设置中奖率（0-9）",{confirmButtonText:t("Save"),cancelButtonText:t("Cancel"),inputPlaceholder:"请输入中奖率（0-9）",inputValue:e.zjl,inputValidator:function(a){return a>=0},inputErrorMessage:"请输入中奖率（0-9）"}).then(({value:a})=>{Q({id:e.id,zjl:a}).then(n=>{n.code==1&&r.onTableHeaderAction("refresh",{})})})},A=e=>{f.prompt("添加用户团队备注","添加用户团队备注",{confirmButtonText:t("Save"),cancelButtonText:t("Cancel"),inputPlaceholder:"请输入备注",inputValidator:function(a){return!!a},inputErrorMessage:"请输入备注"}).then(({value:a})=>{W({id:e,remark:a}).then(n=>{n.code==1&&r.onTableHeaderAction("refresh",{})})})},E=e=>{f.prompt("添加用户备注","添加用户备注",{confirmButtonText:t("Save"),cancelButtonText:t("Cancel"),inputPlaceholder:"请输入用户备注",inputValidator:function(a){return!!a},inputErrorMessage:t("user.user.add_remark_msg")}).then(({value:a})=>{J({id:e,remark:a}).then(n=>{n.code==1&&r.onTableHeaderAction("refresh",{})})})},r=new U(new $("/admin/user.User/"),{column:[{label:t("Id"),prop:"id",align:"center",operator:"=",operatorPlaceholder:t("Id"),width:70,render:"slot",slotName:"id"},{label:t("user.user.pid"),prop:"pid",align:"center",operator:"=",operatorPlaceholder:t("user.user.pid"),render:"slot",slotName:"pid"},{label:t("user.user.adminName"),prop:"admin_name",align:"center",operator:!1},{label:t("user.user.vipLevel"),prop:"vipConfig__vip_level",align:"center",operator:!1},{label:t("user.user.rechargeInvitaStatus"),prop:"recharge_invita_status",align:"center",operator:"=",render:"tag",replaceValue:{1:"是",2:"否"},custom:{1:"success",2:"danger"}},{label:t("user.user.balance"),prop:"balance",align:"center",operator:!1,sortable:"custom"},{label:t("user.user.yBalance"),prop:"y_balance",align:"center",operator:!1,sortable:"custom"},{label:t("user.user.reMoney"),prop:"re_money",align:"center",operator:!1,sortable:"custom"},{label:t("user.user.wMoney"),prop:"w_money",align:"center",operator:!1,sortable:"custom"},{label:t("user.user.betNum"),prop:"bet_num",align:"center",operator:!1,sortable:"custom"},{label:t("user.user.needNum"),prop:"need_num",align:"center",operator:!1,sortable:"custom"},{label:t("user.user.currBet"),prop:"curr_bet",align:"center",operator:!1,sortable:!1},{label:t("user.user.phone"),prop:"phone",align:"center",operator:"="},{label:t("Create time"),prop:"create_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:t("user.user.isTest"),prop:"is_test",align:"center",render:"tag",operator:"=",replaceValue:{1:"是",0:"否"},show:!1},{label:t("user.user.isCommission"),prop:"is_commission",align:"center",render:"switch",replaceValue:{0:t("Disable"),1:t("Enable")}},{label:t("State"),prop:"status",align:"center",render:"tag",replaceValue:{2:t("Disable"),1:t("Enable")}},{label:t("Operate"),align:"center",width:"200",render:"buttons",buttons:b,operator:!1,fixed:"right"}],dblClickNotEditColumn:["all"]},{defaultItems:{status:"1"}});ae(()=>{r.table.ref=k.value,r.mount(),r.getIndex(),r.table.showComSearch=!0});const N=()=>{O({url:"/admin/user.User/export",method:"get",params:r.table.filter,responseType:"blob"},{reductDataFormat:!1}).then(e=>{const n=e.headers["content-disposition"].split("filename="),_=decodeURI(n[1]);X(e.data,_)})};return re("baTable",r),(e,a)=>{const n=u("el-alert"),_=u("Icon"),m=u("el-button"),T=u("el-tooltip"),x=u("el-table-column"),B=u("tempalte"),v=oe("blur");return p(),ne("div",le,[i(r).table.remark?(p(),d(n,{key:0,class:"ba-table-alert",title:i(r).table.remark,type:"info","show-icon":""},null,8,["title"])):h("",!0),o(H,{buttons:["refresh","comSearch","columnDisplay"],"quick-search-placeholder":i(t)("Quick search placeholder",{fields:i(t)("user.user.User name")+"/"+i(t)("user.user.nickname")})},{default:l(()=>[i(s)("export")?I((p(),d(m,{key:0,class:"table-header-operate",type:"danger",onClick:N},{default:l(()=>[o(_,{color:"#ffffff",name:"el-icon-Download"}),se]),_:1})),[[v]]):h("",!0),I((p(),d(m,{class:"table-header-operate",type:"success",onClick:V},{default:l(()=>[ie]),_:1})),[[v]])]),_:1},8,["quick-search-placeholder"]),o(j,{ref_key:"tableRef",ref:k},{id:l(()=>[o(x,{prop:"id",label:"ID",align:"center"},{default:l(c=>[o(T,{class:"box-item",effect:"dark",content:"点击查看详情",placement:"top-start"},{default:l(()=>[o(m,{size:"small",type:"primary",onClick:M=>y(c.row.id)},{default:l(()=>[g(w(c.row.id),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),pid:l(()=>[o(x,{prop:"pid",label:i(t)("user.user.pid"),align:"center"},{default:l(c=>[c.row.pid!=0?(p(),d(B,{key:0},{default:l(()=>[o(T,{class:"box-item",effect:"dark",content:"点击查看详情",placement:"top-start"},{default:l(()=>[o(m,{size:"small",type:"primary",onClick:M=>y(c.row.pid)},{default:l(()=>[g(w(c.row.pid),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):(p(),d(B,{key:1},{default:l(()=>[g(w(c.row.pid),1)]),_:2},1024))]),_:1},8,["label"])]),_:1},512),o(q),i(r).form.operate=="userInfoDialog"?(p(),d(Z,{key:1})):h("",!0),o(F),o(G),o(Y),o(P)])}}});export{Be as default};
