import{d as B,b as C,T as D,a as A}from"./index-c6449983.js";import I from"./popupForm-e34781d0.js";import{e as E,i as v,T as S,M as N,K as n}from"./index-a4f58e3c.js";import{s as V,c as q,e as z}from"./admin-a37c7656.js";import G from"./rateForm-5d1976cf.js";import P from"./googleInfo-53cddf09.js";import K from"./countData-61cc1f7a.js";import M from"./dayData-48c07be8.js";import F from"./countAdminData-2a8698d3.js";import{h as H,af as R,q as p,o as l,k as L,z as r,O as i,V as s,p as c,P as u,a5 as g,W as O,aa as $,ab as Q}from"./vue-5a2488fc.js";import"./index-f6e7dd17.js";import"./validate-d21f834d.js";import"./index-167b3218.js";const W={class:"default-main ba-table-box"},pe=H({name:"auth/admin",__name:"index",setup(j){const{t:o}=E(),y=v();let d=[{render:"tipButton",name:"info",title:"设置邮件额度",text:"",type:"warning",icon:"fa fa-gear",class:"table-row-info",disabledTip:!1,click:(e,a)=>{h(e)},display:(e,a)=>{if(n("editMoney")&&e.email_status==1)return!0}},{render:"confirmButton",name:"info",title:"邮件额度限制开关",text:"",type:"danger",icon:"fa fa-gear",class:"table-row-info",disabledTip:!1,popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonType:"success",title:"开启关闭额度限制？"},click:(e,a)=>{V({id:e.id}).then(()=>{t.onTableHeaderAction("refresh",{})})},display:(e,a)=>{if(n("setEmailStatus")&&e.id!=1)return!0}},{render:"tipButton",name:"info",title:"api费率设置",text:"",type:"success",icon:"fa fa-gear",class:"table-row-info",disabledTip:!1,click:(e,a)=>{t.form.operate="SetRate",t.form.items=e},display:(e,a)=>{if(n("setRate"))return!0}},{render:"confirmButton",name:"info",title:"生成谷歌验证码",text:"",type:"info",icon:"fa fa-google",class:"table-row-info",disabledTip:!1,popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonType:"success",title:"确定生成谷歌密钥吗？"},click:(e,a)=>{q({id:e.id}).then(()=>{t.onTableHeaderAction("refresh",{})})},display:(e,a)=>{if(!e.google_key&&n("saveGoogleKey"))return!0}},{render:"tipButton",name:"info",title:"查看谷歌密钥",text:"",type:"info",icon:"fa fa-google",class:"table-row-info",disabledTip:!1,click:(e,a)=>{t.form.items=e,t.form.operate="GoogleInfo"},display:(e,a)=>{if(e.google_key)return!0}},{render:"tipButton",name:"info",title:"月报",text:"",type:"success",icon:"fa fa-calendar-o",class:"table-row-info",disabledTip:!1,click:(e,a)=>{t.form.items.id=e.id,t.form.operate="countData"},display:(e,a)=>{if(n("getCount"))return!0}},{render:"tipButton",name:"info",title:"官方月报",text:"",type:"primary",icon:"fa fa-calendar-o",class:"table-row-info",disabledTip:!1,click:(e,a)=>{t.form.operate="countAdminData"},display:(e,a)=>{if(n("getAdminCount"))return!0}},{render:"tipButton",name:"info",title:"日报",text:"",type:"warning",icon:"fa fa-calendar-o",class:"table-row-info",disabledTip:!1,click:(e,a)=>{t.form.items.id=e.id,t.form.operate="dayData"},display:(e,a)=>{if(n("getDayCount"))return!0}}];const h=e=>{$.prompt("请输入调整的额度","Tip",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.balance}).then(({value:a})=>{z({id:e.id,money:a}).then(m=>{t.onTableHeaderAction("refresh",{})})})},f=B(["edit","delete"]);f[1].display=e=>e.id!=y.id,d=d.concat(f);const{text:J,copy:_,copied:U,isSupported:k}=S({legacy:!0}),T=e=>{_(e),Q.success("复制成功.")},t=new C(new N("/admin/auth.Admin/"),{column:[{type:"selection",align:"center",operator:!1},{label:o("Id"),prop:"id",align:"center",operator:"=",operatorPlaceholder:o("Id"),width:70},{label:o("auth.admin.username"),prop:"username",align:"center",operator:"LIKE",operatorPlaceholder:o("Fuzzy query")},{label:"所属上级",prop:"p_name",align:"center",operatorPlaceholder:"请输入上级用户名"},{label:"显示一级",prop:"level1",align:"center",operator:"=",render:"tag",replaceValue:{1:"是",0:"否"},show:!1},{label:o("auth.admin.nickname"),prop:"nickname",align:"center",operator:"LIKE",operatorPlaceholder:o("Fuzzy query")},{label:o("auth.admin.grouping"),prop:"group_name_arr",align:"center",operator:!1,render:"tags"},{label:o("auth.admin.head portrait"),prop:"avatar",align:"center",render:"image",operator:!1},{label:"剩余额度",prop:"balance",align:"center",operator:!1},{label:"邀请链接",prop:"url",align:"center",operator:!1,render:"slot",slotName:"url"},{label:o("State"),prop:"status",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:o("Disable"),1:o("Enable")}},{label:o("auth.admin.Last login"),prop:"last_login_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:o("Create time"),prop:"create_time",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:o("Operate"),align:"center",width:"200",render:"buttons",buttons:d,operator:!1,fixed:"right"}],dblClickNotEditColumn:["all"]},{defaultItems:{status:"1"}});return R("baTable",t),t.mount(),t.getIndex(),(e,a)=>{const m=p("el-alert"),w=p("el-button"),x=p("el-table-column");return l(),L("div",W,[r(t).table.remark?(l(),i(m,{key:0,class:"ba-table-alert",title:r(t).table.remark,type:"info","show-icon":""},null,8,["title"])):s("",!0),c(D,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":r(o)("Quick search placeholder",{fields:r(o)("auth.admin.username")+"/"+r(o)("auth.admin.nickname")})},null,8,["quick-search-placeholder"]),c(A,null,{url:u(()=>[c(x,{prop:"url",label:"邀请地址",width:"500",align:"center"},{default:u(b=>[g(O(b.row.url)+" ",1),r(k)?(l(),i(w,{key:0,size:"small",type:"primary",onClick:X=>T(b.row.url)},{default:u(()=>[g("复制 ")]),_:2},1032,["onClick"])):s("",!0)]),_:1})]),_:1}),c(I),c(G),r(t).form.operate=="GoogleInfo"?(l(),i(P,{key:1})):s("",!0),r(t).form.operate=="countData"?(l(),i(K,{key:2})):s("",!0),r(t).form.operate=="dayData"?(l(),i(M,{key:3})):s("",!0),r(t).form.operate=="countAdminData"?(l(),i(F,{key:4})):s("",!0)])}}});export{pe as default};
